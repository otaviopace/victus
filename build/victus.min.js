// victus | (c) 2019 sporeball | MIT license
!function(){var t,s,h,e,l,o,r;setup=i=>{t=document.getElementById(i.id),s=t.getContext("2d"),h=i.w,e=i.h,t.width=h,t.height=e,l=i.color||"#fff"};class a{constructor(t,s){this.x=t,this.y=s,this.xv=this.yv=0}moveTo(t,s){this.x=t,this.y=s}moveBy(t,s){this.x+=t,this.y+=s}hide(){this.a?this.a=l:this.s=0}show(){this.a?this.a=this.col:this.s=1}clone(){return c(this)}u(){this.x+=this.xv,this.y+=this.yv}}var n={Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown"};r=0;do{n[o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(r,r+1)]="Key"+o,r++}while(r<26);c=t=>{let s;if("object"!=typeof t)return t;for(i in s=Object.create(Object.getPrototypeOf(t)),t)s[i]=c(t[i]);return s},x=()=>s,window.victus={setup:setup,Rect:class extends a{constructor(t,s,i,h,e){super(t,s),this.w=i,this.h=h,this.col=this.a=e}draw(){this.u(),s.fillStyle=this.a,s.fillRect(this.x,this.y,this.w,this.h)}},Ellipse:class extends a{constructor(t,s,i,h,e){super(t,s),this.w=i,this.h=h,this.col=this.a=e}draw(){this.u(),s.fillStyle=this.a,s.beginPath(),s.ellipse(this.x,this.y,this.w,this.h,0,0,2*Math.PI),s.closePath(),s.fill()}},Sprite:class extends a{constructor(t,s,i){super(s,i),this.spr=t,this.s=1,this.d=new Image,this.d.src=this.spr}draw(){this.u(),this.s?s.drawImage(this.d,this.x,this.y):(s.fillStyle=l,s.fillRect(this.x,this.y,this.d.width,this.d.height))}},Text:class extends a{constructor(t,s,i,h=16,e="#000",l="Arial",o="left"){super(s,i),this.str=t,this.size=h,this.col=this.a=e,this.font=l,this.align=o}draw(){s.fillStyle=this.a,s.font=this.size+"px "+this.font,s.textAlign=this.align,s.fillText(this.str,this.x,this.y)}},Sound:class{constructor(t,s,i=0){this.snd=t,this.vol=s,this.d=new Audio(this.snd),this.d.loop=i}reset(){this.d.load()}play(){this.reset(),this.d.volume=this.vol,this.d.play()}pause(){this.d.pause()}},clear:()=>{s.fillStyle=l,s.fillRect(0,0,h,e)},keys:n}}();